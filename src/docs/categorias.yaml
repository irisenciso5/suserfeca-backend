tags:
  - name: Categorías
    description: Endpoints para gestión de categorías de productos

paths:
  /api/categorias:
    get:
      tags:
        - Categorías
      summary: Obtener todas las categorías
      description: Devuelve la lista de todas las categorías
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Lista de categorías obtenida correctamente
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    nombre:
                      type: string
                      example: Electrónica
        '401':
          description: No autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token inválido o expirado
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
    
    post:
      tags:
        - Categorías
      summary: Crear una nueva categoría
      description: Crea una nueva categoría de productos (vendedor o admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nombre
              properties:
                nombre:
                  type: string
                  example: Deportes
      responses:
        '201':
          description: Categoría creada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 6
                  nombre:
                    type: string
                    example: Deportes
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: El nombre de la categoría es requerido
        '401':
          description: No autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token inválido o expirado
        '403':
          description: No autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Requiere rol de vendedor o administrador
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor

  /api/categorias/{id}:
    get:
      tags:
        - Categorías
      summary: Obtener una categoría por ID
      description: Devuelve los datos de una categoría específica
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID de la categoría
          example: 1
      responses:
        '200':
          description: Categoría obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  nombre:
                    type: string
                    example: Electrónica
        '401':
          description: No autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token inválido o expirado
        '404':
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Categoría no encontrada
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
    
    put:
      tags:
        - Categorías
      summary: Actualizar una categoría
      description: Actualiza los datos de una categoría específica (vendedor o admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID de la categoría
          example: 6
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nombre
              properties:
                nombre:
                  type: string
                  example: Deportes y Fitness
      responses:
        '200':
          description: Categoría actualizada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 6
                  nombre:
                    type: string
                    example: Deportes y Fitness
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: El nombre de la categoría es requerido
        '401':
          description: No autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token inválido o expirado
        '403':
          description: No autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Requiere rol de vendedor o administrador
        '404':
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Categoría no encontrada
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
    
    delete:
      tags:
        - Categorías
      summary: Eliminar una categoría
      description: Elimina una categoría específica (vendedor o admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID de la categoría
          example: 6
      responses:
        '200':
          description: Categoría eliminada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Categoría eliminada correctamente
        '400':
          description: No se puede eliminar la categoría
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No se puede eliminar la categoría porque tiene productos asociados
                  productos:
                    type: integer
                    example: 5
        '401':
          description: No autenticado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token inválido o expirado
        '403':
          description: No autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Requiere rol de vendedor o administrador
        '404':
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Categoría no encontrada
        '500':
          description: Error del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error interno del servidor
